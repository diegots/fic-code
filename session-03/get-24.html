<!DOCTYPE html>
<html lang="en">
    <head>	
        <meta charset="utf-8">
        <title>Get 24 problem</title>
    </head>	
    <body>
        <script>
            /* **************************************************************   
               *************** Generate alphabet ****************************
             * ************************************************************** */

            /* Recursive version
             * recursive_alg and helper constructs the set of values using recursion
             */
            function helper (element, index, ar) {
                for (var i=0; i<this.length; i++) {
                    ar.push(element + this[i]);
                    ar[index] = "";
                }
            }

            function recursive_alg (l, input, syms) {
                if (l>0) {
                    var _l = input.length;
                    input.forEach(helper, syms);
                    input.splice(0, _l);

                    return recursive_alg(l-1, input, syms);

                } else { return input; }
            }
            /* End of the recursive version */

            /* Easier solution using base 6 numbering */
            function base_6_alg (l, input, syms) {
                    var n_elemts = Math.pow (syms.length, l); // Number of elements in the language.
                    var n_syms = syms.length;
                    input = new Array(n_elemts); 
                    var j;

                    for (var i=0; i<n_elemts; i++) {
                         /* Builds string of length l on the array to store language words */
                        input[i] = i.toString(6);
                        while(input[i].length < l) {
                            input[i] = "0" + input[i];
                        }

                        /* Generate language words from the initialized base syms.length values */
                        var tmp = new Array (l); 
                        for (j=0; j<input[i].length; j++) {
                            tmp[j] = syms[input[i][j]];
                        }
                        input[i] = tmp.join("");
                    }
                     
                    return input;
            }

            /* Main function that builds the alphabet set */
            function generate_language_set (l, syms) {
                var a = [];
                for (var i=0; i<syms.length; i++) {
                    a.push(syms[i]);
                }

                /* Choose either an recursive algorithm or one based on numbering
                 * system properties: */
                return recursive_alg (l-1, a, syms);
                // return base_6_alg (l, (a = []), syms);
            }   

            /* **************************************************************   
               *************** Evaluate alphabet ****************************
             * ************************************************************** */

            /* Evaluate alphabet */
            function evaluate_language_set (alphabet) {
                var counter_3s, counter_8s, counter_ops;
                var stack = [];
                var i, j;
                var tmp = 0;

                for (i=0; i<alphabet.length; i++) {
                    tmp++; 
                }
                console.log (tmp);

                return "";
            }

            /* **************************************************************   
               *************** Set parameters and solve problem *************
             * ************************************************************** */

            /* Obtain any set of words of any length. Just define the desired 
             * alphabet and the words length below. */
            var alphabet = ["3", "8", "+", "-", "*", "/"];
            var words_length = 7;

            /* Not strictly necessary but machine time is retrieved to calculate
             * how it takes to calculate the set of numbers */
            var d0 = Date.now();
            var language = generate_language_set (words_length, alphabet);
            var d1 = Date.now();

            var solution = evaluate_language_set(language);

            /* Outputs time to console */
            console.log("To generate " + language.length + " elements took " + (d1 - d0) + " miliseconds.");
            console.log("First element is: " + language[0] + ", last one: " + language[language.length-1]);
            console.log("Solution found: " + solution);
            
        </script>
    </body>
</html>
